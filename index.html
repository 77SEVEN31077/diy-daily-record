<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="日常紀錄">
    <title>打飛機紀錄 - 今天來一發？</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icon-192.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script type="module" src="/src/main.js"></script>
</head>
<body>

    <!-- 頂部導航欄 -->
    <nav class="top-nav">
        <div class="nav-container">
            <div class="nav-left">
                <a href="/">打飛機紀錄</a>
            </div>
            <div class="nav-right">
                <!-- 語言切換下拉菜單 -->
                <div class="dropdown">
                    <button class="nav-btn nav-btn-language" type="button" id="language-toggle-btn" aria-haspopup="menu" aria-expanded="false" onclick="toggleLanguageDropdown(event)">
                        <svg class="nav-btn-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="m5 8 6 6"></path>
                            <path d="m4 14 6-6 2-3"></path>
                            <path d="M2 5h12"></path>
                            <path d="M7 2h1"></path>
                            <path d="m22 22-5-10-5 10"></path>
                            <path d="M14 18h6"></path>
                        </svg>
                    </button>
                    <div class="dropdown-menu" id="language-dropdown">
                        <a href="#" class="dropdown-item" onclick="selectLanguage('zh-TW'); return false;">
                            <svg class="dropdown-item-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                            </svg>
                            <span>繁體中文</span>
                        </a>
                        <a href="#" class="dropdown-item" onclick="selectLanguage('en'); return false;">
                            <svg class="dropdown-item-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                            </svg>
                            <span>English</span>
                        </a>
                        <a href="#" class="dropdown-item" onclick="selectLanguage('zh-CN'); return false;">
                            <svg class="dropdown-item-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                            </svg>
                            <span>简体中文</span>
                        </a>
                    </div>
                </div>
                <!-- 主題切換下拉菜單 -->
                <div class="dropdown">
                    <button class="nav-btn nav-btn-theme" type="button" id="theme-toggle-btn" aria-haspopup="menu" aria-expanded="false" onclick="toggleThemeDropdown(event)">
                        <svg class="nav-btn-icon" id="theme-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <circle cx="12" cy="12" r="4"></circle>
                            <path d="M12 2v2"></path>
                            <path d="M12 20v2"></path>
                            <path d="m4.93 4.93 1.41 1.41"></path>
                            <path d="m17.66 17.66 1.41 1.41"></path>
                            <path d="M2 12h2"></path>
                            <path d="M20 12h2"></path>
                            <path d="m6.34 17.66-1.41 1.41"></path>
                            <path d="m19.07 4.93-1.41 1.41"></path>
                        </svg>
                    </button>
                    <div class="dropdown-menu" id="theme-dropdown">
                        <a href="#" class="dropdown-item" data-theme="light" onclick="selectTheme('light'); return false;">
                            <svg class="dropdown-item-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="4"></circle>
                                <path d="M12 2v2"></path>
                                <path d="M12 20v2"></path>
                                <path d="m4.93 4.93 1.41 1.41"></path>
                                <path d="m17.66 17.66 1.41 1.41"></path>
                                <path d="M2 12h2"></path>
                                <path d="M20 12h2"></path>
                                <path d="m6.34 17.66-1.41 1.41"></path>
                                <path d="m19.07 4.93-1.41 1.41"></path>
                            </svg>
                            <span>淺色模式</span>
                        </a>
                        <a href="#" class="dropdown-item" data-theme="dark" onclick="selectTheme('dark'); return false;">
                            <svg class="dropdown-item-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
                            </svg>
                            <span>深色模式</span>
                        </a>
                        <a href="#" class="dropdown-item" data-theme="system" onclick="selectTheme('system'); return false;">
                            <svg class="dropdown-item-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            <span>系統設定</span>
                        </a>
                    </div>
                </div>
                <div class="nav-buttons-group">
                    <a href="#" class="nav-link nav-link-signin" onclick="openLogin(); return false;">登入</a>
                    <a href="#" class="nav-link nav-link-signup" onclick="openSignup(); return false;">註冊</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container" id="capture-area" style="padding: 20px; margin-top: 0;">
        <header>
            <h1>打飛機紀錄</h1>
            <h2>今天來一發？</h2>
        </header>

        <div class="section-box">
            <div class="section-title">記下你的每一次</div>
            <div class="form-group">
                <label>你的暱稱</label>
                <input type="text" id="nickname" placeholder="輸入你的暱稱...">
            </div>
            <div class="form-group">
                <label>時間</label>
                <input type="datetime-local" id="record-time">
            </div>
            <button class="btn" onclick="addRecord()">確認紀錄</button>
        </div>

        <div class="section-box" id="history-section" style="display:none;">
            <div class="section-title">你的近期戰績</div>
            <ul class="history-list" id="history-list">
                </ul>
        </div>

        <div class="section-box">
            <div class="section-title">本月打槍王 (Top 30)</div>
            <ul class="rank-list" id="rank-list">
                <li class="rank-item" style="justify-content: center; color: #444;">載入中...</li>
            </ul>
        </div>

        <div class="section-box no-capture">
            <button class="btn btn-share" onclick="shareStats()">分享你的戰績 📸</button>
            <p id="share-msg" style="text-align: center; font-size: 0.8rem; color: var(--text-muted); margin-top: 10px; display: none;">截圖已生成，連結已複製！</p>
        </div>

        <!-- 留言板區塊（僅登入用戶可見） -->
        <div class="section-box messages-section" id="messages-section">
            <div class="section-title" id="messages-title">留言板</div>
            
            <!-- 留言輸入表單 -->
            <div class="message-form">
                <textarea 
                    id="message-input" 
                    class="message-input" 
                    placeholder="輸入你的留言..."
                    rows="3"
                    maxlength="500"
                ></textarea>
                <button class="btn message-submit-btn" onclick="submitMessage()">發送留言</button>
                <p id="message-error" style="color: #ff4444; font-size: 0.85rem; margin-top: 8px; display: none;"></p>
            </div>

            <!-- 留言列表 -->
            <ul class="messages-list" id="messages-list">
                <li class="message-empty">載入中...</li>
            </ul>

            <!-- 載入更多按鈕 -->
            <div class="message-load-more" id="load-more-container" style="display: none;">
                <button class="message-load-more-btn" onclick="loadMoreMessages()">載入更多</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div style="margin-bottom: 15px;">
            <span style="color: var(--text-muted);">@ 2025 打飛機  ｜  </span>
            <a href="https://x.com/77seven31077" target="_blank" rel="noopener noreferrer" class="footer-x-link" style="display: inline-block; vertical-align: middle;">
                <svg class="footer-x-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="width: 1rem; height: 1rem;">
                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" fill="var(--text-muted)"/>
                </svg>
            </a>
        </div>
        使用此網站即表示您同意<a href="#" onclick="openTerms(); return false;" class="footer-link">服務條款</a>並已閱讀<a href="#" onclick="openPrivacy(); return false;" class="footer-link">隱私政策</a>
    </footer>

    <!-- 服務條款模態框 -->
    <div id="termsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeTerms()">&times;</span>
                <h3>服務條款</h3>
            </div>
            <div class="modal-body">
                <p>歡迎使用本網站。使用本網站即表示您同意遵守以下服務條款：</p>
                
                <p><strong>1. 服務說明</strong></p>
                <p>本網站提供個人追蹤記錄服務，僅供個人使用及娛樂目的。</p>
                
                <p><strong>2. 使用者責任</strong></p>
                <p>使用者應確保所提供資訊的真實性，並對其使用本網站的行為負責。請適度操作，注意身體健康。</p>
                
                <p><strong>3. 隱私保護</strong></p>
                <p>我們重視您的隱私，相關隱私政策請參閱「隱私政策」頁面。</p>
                
                <p><strong>4. 免責聲明</strong></p>
                <p>本網站僅用於個人追蹤，只有娛樂價值，不提供其他額外服務。網站不對使用者的任何行為或後果負責。</p>
                
                <p><strong>5. 服務變更</strong></p>
                <p>我們保留隨時修改或終止服務的權利，恕不另行通知。</p>
                
                <p><strong>6. 條款修改</strong></p>
                <p>我們保留隨時修改本服務條款的權利，修改後的條款將在網站上公布。</p>
            </div>
        </div>
    </div>

    <!-- 隱私政策模態框 -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closePrivacy()">&times;</span>
                <h3>隱私政策</h3>
            </div>
            <div class="modal-body">
                <p><strong>1. 網站起源</strong></p>
                <p>純粹為了打飛機而生</p>
                
                <p><strong>2. 關於打飛機的意義</strong></p>
                <p>目前這個時代，"打飛機" 被歸納為是一個很 "低級" 的詞彙。甚至戀愛、約炮和嫖娼都比打飛機顯得要 "高級"，經常打飛機的人還會被貼上 "Loser" 的標籤。</p>
                
                <p>但是打飛機其實是解決性慾成本最低的方式。</p>
                
                <p>你不打飛機，你就得通過戀愛、約炮、或者嫖娼去解決你的性慾，但是這三者無論是從時間、精神、或金錢層面去看，成本都遠遠高於打飛機。所以，打飛機實際上是在以最高效的方式來解決自己的性慾。</p>
                
                <p>"自己自足" 在任何領域都屬於 "高級" 的詞彙，但是到了 "解決性慾" 這件事情上，自給自足反而成了一個 "低級" 詞彙。所以我覺得，目前這個時代，世人對於 "打飛機" 這件事情有著嚴重的價值錯判。</p>
                
                <p>AI 帶來的信息爆炸時代開始逐漸把 "效率主義" 推向主流，而 "打飛機" 這個在 "解決性慾" 領域中最有 "效率" 的解決方案可能會被大家重新正視和定位。</p>
                
                <p>未來會有越來越多的人選擇打飛機，整個世界會迎來一次屬於打飛機的大牛市，進入全民打飛機的時代。到時候你跟別人說你打飛機，別人會覺得你很時尚，你很高級。</p>
                
                <p style="text-align: right; margin-top: 20px; color: #888;">-殺破狼(X:@wolfyxbt)</p>
            </div>
        </div>
    </div>

    <!-- 登入模態框 -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeLogin()">&times;</span>
                <h3>登入</h3>
            </div>
            <div class="modal-body">
                <form id="loginForm" onsubmit="handleLogin(event); return false;">
                    <div class="form-group">
                        <label for="loginEmail">電子郵件</label>
                        <input type="email" id="loginEmail" required placeholder="請輸入您的電子郵件">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">密碼</label>
                        <input type="password" id="loginPassword" required placeholder="請輸入您的密碼">
                    </div>
                    <div id="loginError" style="color: #ff4444; font-size: 0.9rem; margin-bottom: 15px; display: none;"></div>
                    <button type="submit" class="btn" id="loginBtn">登入</button>
                </form>
                <p style="text-align: center; margin-top: 15px; font-size: 0.9rem; color: var(--text-muted);">
                    還沒有帳號？ <a href="#" onclick="closeLogin(); openSignup(); return false;" style="color: var(--highlight); text-decoration: underline;">立即註冊</a>
                </p>
                <p style="text-align: center; margin-top: 10px; font-size: 0.85rem;">
                    <a href="#" onclick="closeLogin(); openForgotPassword(); return false;" style="color: var(--text-muted); text-decoration: underline;">忘記密碼？</a>
                </p>
            </div>
        </div>
    </div>

    <!-- 忘記密碼模態框 -->
    <div id="forgotPasswordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeForgotPassword()">&times;</span>
                <h3>忘記密碼</h3>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 15px; color: var(--text-muted); font-size: 0.9rem;">請輸入您的電子郵件地址，我們將發送密碼重設連結給您。</p>
                <form id="forgotPasswordForm" onsubmit="handleForgotPassword(event); return false;">
                    <div class="form-group">
                        <label for="forgotPasswordEmail">電子郵件</label>
                        <input type="email" id="forgotPasswordEmail" required placeholder="請輸入您的電子郵件">
                    </div>
                    <div id="forgotPasswordError" style="color: #ff4444; font-size: 0.9rem; margin-bottom: 15px; display: none;"></div>
                    <div id="forgotPasswordSuccess" style="color: #44ff44; font-size: 0.9rem; margin-bottom: 15px; display: none;"></div>
                    <button type="submit" class="btn" id="forgotPasswordBtn">發送重設連結</button>
                </form>
                <p style="text-align: center; margin-top: 15px; font-size: 0.9rem; color: var(--text-muted);">
                    <a href="#" onclick="closeForgotPassword(); openLogin(); return false;" style="color: var(--highlight); text-decoration: underline;">返回登入</a>
                </p>
            </div>
        </div>
    </div>

    <!-- 註冊模態框 -->
    <div id="signupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeSignup()">&times;</span>
                <h3>註冊</h3>
            </div>
            <div class="modal-body">
                <form id="signupForm" onsubmit="handleSignup(event); return false;">
                    <div class="form-group">
                        <label for="signupEmail">電子郵件</label>
                        <input type="email" id="signupEmail" required placeholder="請輸入您的電子郵件">
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">密碼</label>
                        <input type="password" id="signupPassword" required placeholder="請輸入密碼（至少6個字元）" minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="signupPasswordConfirm">確認密碼</label>
                        <input type="password" id="signupPasswordConfirm" required placeholder="請再次輸入密碼">
                    </div>
                    <div id="signupError" style="color: #ff4444; font-size: 0.9rem; margin-bottom: 15px; display: none;"></div>
                    <button type="submit" class="btn" id="signupBtn">註冊</button>
                </form>
                <p style="text-align: center; margin-top: 15px; font-size: 0.9rem; color: var(--text-muted);">
                    已有帳號？ <a href="#" onclick="closeSignup(); openLogin(); return false;" style="color: var(--highlight); text-decoration: underline;">立即登入</a>
                </p>
            </div>
        </div>
    </div>

</body>
</html>
